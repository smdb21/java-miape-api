package org.proteored.miapeapi.xml.ge.adapter;

import org.proteored.miapeapi.cv.ge.DeviceModel;
import org.proteored.miapeapi.cv.ge.EquipmentName;
import org.proteored.miapeapi.interfaces.Adapter;
import org.proteored.miapeapi.interfaces.Equipment;
import org.proteored.miapeapi.xml.ge.autogenerated.MIAPEGEEquipmentType;
import org.proteored.miapeapi.xml.ge.autogenerated.ObjectFactory;
import org.proteored.miapeapi.xml.ge.util.GEControlVocabularyXmlFactory;
import org.proteored.miapeapi.xml.util.MiapeXmlUtil;

public class EquipmentAdapter implements Adapter<MIAPEGEEquipmentType> {
	private final Equipment equipment;
	private final ObjectFactory factory;
	private final GEControlVocabularyXmlFactory cvFactory;

	public EquipmentAdapter(Equipment equipment, ObjectFactory factory,
			GEControlVocabularyXmlFactory cvFactory) {
		this.equipment = equipment;
		this.factory = factory;
		this.cvFactory = cvFactory;
	}

	@Override
	public MIAPEGEEquipmentType adapt() {
		MIAPEGEEquipmentType xmlEquipment = factory.createMIAPEGEEquipmentType();
		xmlEquipment.setCatalogNumber(equipment.getCatalogNumber());
		xmlEquipment.setComments(equipment.getComments());
		xmlEquipment.setDescription(equipment.getDescription());
		xmlEquipment.setManufacturer(cvFactory.createCV(equipment.getManufacturer(), null));
		xmlEquipment.setModel(cvFactory.createCV(equipment.getModel(), null,
				DeviceModel.getInstance(cvFactory.getCvManager())));
		xmlEquipment.setName(cvFactory.createCV(equipment.getName(), null,
				EquipmentName.getInstance(cvFactory.getCvManager())));
		xmlEquipment.setParameters(equipment.getParameters());
		xmlEquipment.setURI(equipment.getUri());
		xmlEquipment.setVersion(equipment.getVersion());
		xmlEquipment.setId(MiapeXmlUtil.IdentifierPrefixes.EQUIPMENT.getPrefix()
				+ equipment.getId());

		return xmlEquipment;
	}
}
