package org.proteored.miapeapi.xml.pride.adapter;

import org.apache.log4j.Logger;
import org.proteored.miapeapi.cv.ControlVocabularyManager;
import org.proteored.miapeapi.interfaces.Adapter;
import org.proteored.miapeapi.interfaces.ms.MSContact;
import org.proteored.miapeapi.xml.pride.autogenerated.ObjectFactory;
import org.proteored.miapeapi.xml.pride.autogenerated.PersonType;

public class PersonTypeAdapter implements Adapter<PersonType> {
	private static Logger log = Logger.getLogger("log4j.logger.org.proteored");

	private final MSContact miapeContact;

	private final ObjectFactory factory;

	private final ControlVocabularyManager cvManager;

	public PersonTypeAdapter(ObjectFactory factory, ControlVocabularyManager cvManager,
			MSContact msContact) {
		this.miapeContact = msContact;
		this.factory = factory;
		this.cvManager = cvManager;
	}

	@Override
	public PersonType adapt() {
		log.info("createContact");
		PersonType prideContact = factory.createPersonType();
		if (miapeContact == null) {
			prideContact.setName("");
			prideContact.setInstitution("");
			return prideContact;
		}

		// mandatories
		String miapeContactName = miapeContact.getName();
		if (miapeContact.getLastName() != null && !miapeContact.getLastName().equals(""))
			miapeContactName += " " + miapeContact.getLastName();
		if (miapeContactName != null) {
			prideContact.setName(miapeContactName);
		} else {
			prideContact.setName("");
		}
		String miapeInstitution = miapeContact.getInstitution();
		if (miapeInstitution != null) {
			prideContact.setInstitution(miapeInstitution);
		} else {
			prideContact.setInstitution("");
		}

		// not mandatories
		StringBuilder contactInfo = new StringBuilder();
		if (miapeContact.getDepartment() != null && !miapeContact.getDepartment().equals(""))
			contactInfo.append(" Department:" + miapeContact.getDepartment());
		if (miapeContact.getPosition() != null && !miapeContact.getPosition().equals(""))
			contactInfo.append(" Position:" + miapeContact.getPosition());
		if (miapeContact.getAddress() != null && !miapeContact.getAddress().equals(""))
			contactInfo.append(" Address:" + miapeContact.getAddress());
		if (miapeContact.getCP() != null && !miapeContact.getCP().equals(""))
			contactInfo.append(" CP:" + miapeContact.getCP());
		if (miapeContact.getLocality() != null && !miapeContact.getLocality().equals(""))
			contactInfo.append(" Locality:" + miapeContact.getLocality());
		if (miapeContact.getCountry() != null && !miapeContact.getCountry().equals(""))
			contactInfo.append(" Country:" + miapeContact.getCountry());
		if (miapeContact.getEmail() != null && !miapeContact.getEmail().equals(""))
			contactInfo.append(" e-mail:" + miapeContact.getEmail());
		if (miapeContact.getTelephone() != null && !miapeContact.getTelephone().equals(""))
			contactInfo.append(" Telephone:" + miapeContact.getTelephone());
		if (miapeContact.getFax() != null && !miapeContact.getFax().equals(""))
			contactInfo.append(" Fax:" + miapeContact.getFax());
		String string = contactInfo.toString();
		if (!string.equals(""))
			prideContact.setContactInfo(string);
		return prideContact;
	}

	private boolean compareContacts(MSContact msiContact, MSContact msContact) {
		if (msContact == null || msiContact == null)
			return false;
		if (msContact.getAddress() != null)
			if (!msContact.getAddress().equals(msiContact.getAddress()))
				return false;
		if (msContact.getCountry() != null)
			if (!msContact.getCountry().equals(msiContact.getCountry()))
				return false;
		if (msContact.getCP() != null)
			if (!msContact.getCP().equals(msiContact.getCP()))
				return false;
		if (msContact.getDepartment() != null)
			if (!msContact.getDepartment().equals(msiContact.getDepartment()))
				return false;
		if (msContact.getEmail() != null)
			if (!msContact.getEmail().equals(msiContact.getEmail()))
				return false;
		if (msContact.getFax() != null)
			if (!msContact.getFax().equals(msiContact.getFax()))
				return false;
		if (msContact.getInstitution() != null)
			if (!msContact.getInstitution().equals(msiContact.getInstitution()))
				return false;
		if (msContact.getLastName() != null)
			if (!msContact.getLastName().equals(msiContact.getLastName()))
				return false;
		if (msContact.getName() != null)
			if (!msContact.getName().equals(msiContact.getName()))
				return false;
		if (msContact.getPosition() != null)
			if (!msContact.getPosition().equals(msiContact.getPosition()))
				return false;
		if (msContact.getTelephone() != null)
			if (!msContact.getTelephone().equals(msiContact.getTelephone()))
				return false;
		return true;
	}

}
